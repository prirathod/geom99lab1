<!DOCTYPE html>
<html>

<head>
  <title>Ramsar Sites of Gujarat</title>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCM-WWHYHIKY-do4kquMy9Z4wQaQx51AuE&callback=initMap&v=weekly" async></script>
  <style>
    body {
      height: 100%;
      margin: 0;
      padding: 0;
      font-family: 'Arial', sans-serif;
    }

    #map {
      height: 100%;
    }
  </style>
</head>

<body>
  <div id="map"></div>
  <div id="legend">
    <h3>Legend</h3>
  </div>

  <script>
    const parser = new DOMParser();

    async function initMap() {
      // Request needed libraries.
      const { Map } = await google.maps;
      const { AdvancedMarkerElement, PinElement } = await google.maps.importLibrary("marker");
      const map = new Map(document.getElementById("map"), {
        center: { lat: 21.1243, lng: 70.8242 },
        zoom: 10,
        mapId: "4504f8b37365c3d0",
      });

      // Each PinElement is paired with a MarkerView to demonstrate setting each parameter.
      // Default marker with title text (no PinElement).
      const markerViewWithText = new AdvancedMarkerElement({
        map,
        position: { lat: 21.1243, lng: 70.8242 },
        title: "Ramsar Sites of Gujarat",
      });

      // Adjust the scale.
      const pinScaled = new PinElement({
        scale: 2,
      });
      const markerViewScaled = new AdvancedMarkerElement({
        map,
        position: { lat: 22.51, lng: 70.14 },
        content: pinScaled.element,
        title: "Khijadiya Wildlife Sanctuary"
      });

      // Change the background color.
      const pinBackground = new PinElement({
        background: "#FBBC04",
      });
      const markerViewBackground = new AdvancedMarkerElement({
        map,
        position: { lat: 22.46, lng: 72.02 },
        content: pinBackground.element,
        title:  "Nalsarovar"
      });

      // Change the border color.
      const pinBorder = new PinElement({
        borderColor: "#137333",
      });
      const markerViewBorder = new AdvancedMarkerElement({
        map,
        position: { lat: 23.1373, lng: 72.4066 },
        content: pinBorder.element,
        title: "Thol Lake"
      });

      // Change the glyph color.
      const pinGlyph = new PinElement({
        glyphColor: "white",
      });
      const markerViewGlyph = new AdvancedMarkerElement({
        map,
        position: { lat: 22.172, lng: 73.486 },
        content: pinGlyph.element,
        title: "Wadhvana Wetland"
      });

      // Hide the glyph.
      const pinNoGlyph = new PinElement({
        glyph: "white",
      });
      const markerViewNoGlyph = new AdvancedMarkerElement({
        map,
        position: { lat: 26.9261, lng: 75.0962 },
        content: pinNoGlyph.element,
        title: "Sambhar Lake"
      });
    }

    initMap();
    function initMap() {
  map = new google.maps.Map(document.getElementById("map"), {
    zoom: 7,
    center: {lat: 21.1243, lng: 70.8242 }, // Center the map on Chicago, USA.
  });
  poly = new google.maps.Polyline({
    strokeColor: "yellow",
    strokeOpacity: 1.0,
    strokeWeight: 3,
  });
  poly.setMap(map);
  // Add a listener for the click event
  map.addListener("click", addLatLng);
}

// Handles click events on a map, and adds a new point to the Polyline.
function addLatLng(event) {
  const path = poly.getPath();

  // Because path is an MVCArray, we can simply append a new coordinate
  // and it will automatically appear.
  path.push(event.latLng);
  // Add a new marker at the new plotted point on the polyline.
  new google.maps.Marker({
    position: event.latLng,
    title: "#" + path.getLength(),
    map: map,
  });
}
 // Create legend
 const legendContainer = document.getElementById("legend");

for (const [i, [position, title]] of tourStops.entries()) {
  const legendItem = document.createElement("div");
  legendItem.classList.add("legend-item");

  const legendColor = document.createElement("div");
  legendColor.classList.add("legend-color");
  legendColor.style.backgroundColor = getRandomColor(); // You can replace this with specific colors for each type

  const legendLabel = document.createElement("div");
  legendLabel.textContent = `${i + 1}. ${title}`;

  legendItem.appendChild(legendColor);
  legendItem.appendChild(legendLabel);
  legendContainer.appendChild(legendItem);
}


function getRandomColor() {
// Function to generate random color
const letters = "0123456789ABCDEF";
let color = "#";
for (let i = 0; i < 6; i++) {
  color += letters[Math.floor(Math.random() * 16)];
}
return color;
}
window.initMap = initMap;
  </script>
</body>

</html>
